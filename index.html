<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nour Scratch Card ðŸ’–</title>
<style>
body {
  margin:0; padding:0;
  font-family: 'Cursive', sans-serif;
  display:flex; justify-content:center; align-items:center;
  height:100vh;
  background: radial-gradient(circle at center, #2b003d, #5a005f, #7f007f);
  color:#fff;
}
.container{
  position:relative;
  text-align:center;
  max-width:900px;
  padding:60px;
  border-radius:25px;
  background:rgba(0,0,0,0.25);
  box-shadow:0 15px 60px rgba(0,0,0,0.7);
  backdrop-filter: blur(8px);
  overflow:hidden;
}
h1{
  font-size:6em;
  font-weight:bold;
  color:#ff79c6;
  text-shadow: 0 0 10px #ff79c6, 0 0 20px #b07dd3;
  margin-bottom:40px;
}
#paragraph{
  font-size:1.8em;
  line-height:2.4em;
  max-width:800px;
  margin:0 auto;
  position:relative;
}
canvas{
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  border-radius:25px;
  cursor: pointer;
  touch-action: none;
}
</style>
</head>
<body>

<div class="container">
  <h1>NOUR</h1>
  <p id="paragraph">Loading...</p>
  <canvas id="scratch"></canvas>
</div>

<script>
// â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
// 1) Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Google Sheets
// Ø¶Ø¹ Ù…Ø¹Ø±Ù Ø§Ù„Ø´ÙŠØª Ø§Ù„Ø®Ø§Øµ ÙÙŠ Ø§Ù„Ø³Ø·Ø± Ø§Ù„ØªØ§Ù„ÙŠ:
const SHEET_ID = "1Lunrna_CRR3EUdiGW0csT0LNa97P7GEneZM_-NRTo8g";

fetch(`https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json`)
.then(res => res.text())
.then(txt => {
  const json = JSON.parse(txt.substr(47).slice(0,-2));
  const rows = json.table.rows.map(r => r.c && r.c[0] && r.c[0].v);

  // Ø­Ø³Ø§Ø¨ Ø¹Ø¨Ø§Ø±Ø© Ø§Ù„ÙŠÙˆÙ…
  const start = new Date('2025-01-01');
  const today = new Date();
  const days = Math.floor((today - start)/(1000*60*60*24));
  const index = rows.length > 0 ? days % rows.length : 0;

  document.getElementById('paragraph').textContent = rows[index] || "";
});

// â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
// 2) Scratch Card
const canvas = document.getElementById('scratch');
const ctx = canvas.getContext('2d');
const container = document.querySelector('.container');

function resizeCanvas(){
  canvas.width = container.clientWidth;
  canvas.height = container.clientHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

// Ø±Ø³Ù… Ø§Ù„Ø·Ø¨Ù‚Ø© Ø§Ù„Ù…ØºØ·Ù‘Ø§Ø©
ctx.fillStyle = '#555';
ctx.fillRect(0,0,canvas.width,canvas.height);

let isDrawing = false;
function getPos(e){
  const rect = canvas.getBoundingClientRect();
  if(e.touches){
    return { x: e.touches[0].clientX - rect.left, y: e.touches[0].clientY - rect.top };
  }
  return { x: e.clientX - rect.left, y: e.clientY - rect.top };
}
function scratch(e){
  if(!isDrawing) return;
  const pos = getPos(e);
  ctx.globalCompositeOperation="destination-out";
  ctx.beginPath();
  ctx.arc(pos.x,pos.y,30,0,Math.PI*2);
  ctx.fill();
}

canvas.addEventListener('mousedown',()=>{ isDrawing=true });
canvas.addEventListener('mouseup',()=>{ isDrawing=false });
canvas.addEventListener('mouseleave',()=>{ isDrawing=false });
canvas.addEventListener('mousemove', scratch);

canvas.addEventListener('touchstart',(e)=>{ isDrawing=true; scratch(e); e.preventDefault(); });
canvas.addEventListener('touchend',()=>{ isDrawing=false });
canvas.addEventListener('touchmove',(e)=>{ scratch(e); e.preventDefault(); });

</script>

</body>
</html>